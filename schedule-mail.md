# üñºÔ∏è Screenshot Report Cron Job (Vercel)

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà **‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥, ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô, ‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (screenshot)** ‡πÅ‡∏•‡πâ‡∏ß **‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏ô‡∏ö‡∏†‡∏≤‡∏û‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô** ‡πÇ‡∏î‡∏¢‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡πà‡∏≤‡∏ô **Vercel Cron Job**

---

## ‚öôÔ∏è ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å

- ‚úÖ ‡∏£‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô **Vercel Serverless Function**
- üß© ‡πÉ‡∏ä‡πâ **Puppeteer + Chromium (Headless)** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö capture ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
- üîë ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥** ‡∏î‡πâ‡∏ß‡∏¢ email/password ‡∏à‡∏≤‡∏Å `.env`
- ‚úâÔ∏è ‡πÅ‡∏ô‡∏ö screenshot ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡πà‡∏≤‡∏ô **Gmail SMTP**
- üîê ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ **CRON_SECRET token**
- üåê ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ / Dashboard Dynamic Rendering**
- ‚è∞ ‡∏£‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ (‡∏ó‡∏∏‡∏Å 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)

---

## üìÇ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

app/
‚îî‚îÄ‚îÄ api/
‚îî‚îÄ‚îÄ cron/
‚îî‚îÄ‚îÄ screenshot-report/
‚îî‚îÄ‚îÄ route.ts # ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Cron Job
.env.local


---


## üïì ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Cron Job ‡∏ö‡∏ô Vercel

‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Vercel Dashboard ‚Üí Project ‚Üí Settings ‚Üí Cron Jobs**

‡πÄ‡∏û‡∏¥‡πà‡∏° Job ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏ä‡πà‡∏ô:

| Field | Value |
|--------|--------|
| **Path** | `/api/cron/screenshot-report` |
| **Schedule** | `0 9 */14 * *` (‡∏ó‡∏∏‡∏Å 14 ‡∏ß‡∏±‡∏ô‡∏ï‡∏≠‡∏ô 09:00 ‡∏ô.) |
| **Region** | `all` |
| **Request Method** | `GET` |
| **Headers** | `Authorization: Bearer YOUR_CRON_SECRET` |


## üß† ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Flow)

1. Cron Job ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API `/api/cron/screenshot-report` ‡∏î‡πâ‡∏ß‡∏¢ token ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á  
2. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏¥‡∏î **Chromium headless** ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤ URL ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î  
3. ‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•/‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å ‚ÄúSign in‚Äù  
4. ‡∏£‡∏≠‡πÉ‡∏´‡πâ dashboard ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à  
5. ‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤ (fullPage screenshot)  
6. ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏ô‡∏ö‡∏†‡∏≤‡∏û‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ  
7. ‡∏õ‡∏¥‡∏î browser ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ response JSON

---

## üìß ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å

**‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á:**  
TBKK-Surazense - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ó‡∏∏‡∏Å 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå 9/10/2568

**‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤:**  
‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö,
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ screenshot ‡∏£‡∏∞‡∏ö‡∏ö TBKK-Surazense ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 9/10/2568 09:00 ‡∏ô.
Screenshot ‡πÅ‡∏ô‡∏ö‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö


**‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö:**  
tbkk-report-<timestamp>.png


---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Cron API ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ä‡πâ `curl`

curl -X GET https://fe-suratech-sensor-test.vercel.app/api/cron/screenshot-report /
  -H "Authorization: Bearer YOUR_CRON_SECRET"

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á .env.local

    NEXT_PUBLIC_API_BASE_URL=https://api.suratech.sensors.thetigerteamacademy.net
    GMAIL_USER=<YOUR_EMAIL>
    GMAIL_APP_PASSWORD=xxx xxx xxx xxx
    CRON_SECRET=<USE_YOUR_SECRET_KEY OR CREATE_NEW_SECRET_KEY_BY_YOUR_SELF>
    NEXT_PUBLIC_BASE_URL=https://fe-suratech-sensor-test.vercel.app
    REPORT_RECIPIENTS=<Email_for_receiving_information -> Example <test1@gmail.com,test2@gmail.com>> 

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**
![‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô](./screenshot.png)
